<!-- ç¬¬1æ®µï¼šå®å®ä¿¡æ¯æ¨ªå¹… -->
<view class="status-overview">
  <view class="baby-info">
    <!-- å¤´åƒåŒºåŸŸï¼Œç‚¹å‡»å¯ç¼–è¾‘ -->
    <view class="avatar" bindtap="editBabyInfo">
      <text class="avatar-text">{{babyInfo.name ? babyInfo.name.substring(0,2) : 'å®å®'}}</text>
    </view>
    <view class="info-text">
      <!-- å§“åå’Œç¼–è¾‘å›¾æ ‡ -->
      <view class="name-section">
        <text class="name">{{babyInfo.name || 'å®å®'}} Â· {{babyInfo.age || '0å²0ä¸ªæœˆ'}}</text>
        <text class="edit-icon" bindtap="editBabyInfo">âœï¸</text>
      </view>
      <text class="mood">{{babyInfo.healthStatus || 'ç‚¹å‡»è®¾ç½®å®å®ä¿¡æ¯'}}</text>
    </view>
  </view>
  <view class="checkin-section">
    <view class="checkin-stats">
      <text class="days">å¥åº·è¯„åˆ† {{babyInfo.healthRating || 0}}åˆ†</text>
    </view>
    <view class="actions">
      <view class="action-icon" bindtap="handleCheckin">
        <view class="icon">ğŸ“…</view>
        <text class="icon-text">ç­¾åˆ°</text>
      </view>
      <view class="action-icon" bindtap="handleShare">
        <view class="icon">â†—ï¸</view>
        <text class="icon-text">åˆ†äº«</text>
      </view>
    </view>
  </view>
</view>

<!-- ç¬¬2æ®µï¼šå…³å¿ƒå®è´åŠŸèƒ½åŒº -->
<view class="care-section">
  <view class="care-title">â¤ï¸ å…³å¿ƒå®è´</view>
  <view class="function-grid">
    <view class="function-item" bindtap="navToBabyStatus">
      <view class="function-icon">ğŸ“Š</view>
      <text class="function-text">æˆ‘å®æƒ…å†µ</text>
    </view>
    <view class="function-item" bindtap="navToMap">
      <view class="function-icon">ğŸ—ºï¸</view>
      <text class="function-text">çœ‹çœ‹å‘¨å›´</text>
    </view>
    <view class="function-item" bindtap="navToDiary">
      <view class="function-icon">ğŸ“”</view>
      <text class="function-text">å¿ƒæƒ…æ—¥è®°</text>
    </view>
  </view>
</view>

<!-- ç¬¬3æ®µï¼šå¥åº·è¶‹åŠ¿å›¾è¡¨ -->
<view class="chart-section">
  <view class="chart-header">
    <view class="header-left">
      <text class="chart-title">å¥åº·è¶‹åŠ¿ - ç—‡çŠ¶ä¸¥é‡ç¨‹åº¦</text>
      <text class="chart-desc">åŸºäºæœ€è¿‘ç—‡çŠ¶æ•°æ®è®¡ç®— Â· å½“å‰è¯„åˆ†: {{currentHealthIndex}}</text>
    </view>
    <view class="header-right">
      <text class="refresh-btn" bindtap="refreshHealthData">åˆ·æ–°</text>
    </view>
  </view>

  <view class="health-levels">
    <view class="level-item {{currentHealthIndex >= 90 ? 'active' : ''}}">
      <text class="level-text">ä¼˜ç§€</text>
      <text class="level-range">90-100</text>
    </view>
    <view class="level-item {{currentHealthIndex >= 80 && currentHealthIndex < 90 ? 'active' : ''}}">
      <text class="level-text">è‰¯å¥½</text>
      <text class="level-range">80-89</text>
    </view>
    <view class="level-item {{currentHealthIndex >= 70 && currentHealthIndex < 80 ? 'active' : ''}}">
      <text class="level-text">ä¸€èˆ¬</text>
      <text class="level-range">70-79</text>
    </view>
    <view class="level-item {{currentHealthIndex >= 60 && currentHealthIndex < 70 ? 'active' : ''}}">
      <text class="level-text">å…³æ³¨</text>
      <text class="level-range">60-69</text>
    </view>
    <view class="level-item {{currentHealthIndex < 60 ? 'active' : ''}}">
      <text class="level-text">éœ€é‡è§†</text>
      <text class="level-range">&lt;60</text>
    </view>
  </view>

  <!-- æŠ˜çº¿å›¾å®¹å™¨ -->
  <view class="line-chart-container">
    <view class="chart-bg">
      <!-- Yè½´æ ‡ç­¾ -->
      <view class="y-axis">
        <text class="y-label">100</text>
        <text class="y-label">80</text>
        <text class="y-label">60</text>
        <text class="y-label">40</text>
        <text class="y-label">20</text>
        <text class="y-label">0</text>
      </view>
      
      <!-- å›¾è¡¨åŒºåŸŸ -->
      <view class="chart-area">
        <!-- ç½‘æ ¼çº¿ -->
        <view class="grid-horizontal"></view>
        <view class="grid-horizontal"></view>
        <view class="grid-horizontal"></view>
        <view class="grid-horizontal"></view>
        <view class="grid-horizontal"></view>
        
        <!-- æŠ˜çº¿è·¯å¾„ - ç§»é™¤å¤æ‚çš„clip-path -->
        <view class="line-path"></view>
        
        <!-- æ•°æ®ç‚¹ -->
        <block wx:for="{{healthTrendData}}" wx:key="date">
          <view 
            class="data-point {{currentHealthIndex === item.healthIndex ? 'active' : ''}}" 
            style="left: {{(100 / (healthTrendData.length - 1)) * index}}%; bottom: {{item.healthIndex}}%;"
            bindtap="onDataPointTap"
            data-index="{{index}}"
            data-item="{{item}}"
          >
            <view class="point-tooltip">{{item.displayDate}}: {{item.healthIndex}}åˆ†</view>
          </view>
        </block>
      </view>
    </view>
    
    <!-- Xè½´æ—¥æœŸ -->
    <view class="x-axis">
      <block wx:for="{{healthTrendData}}" wx:key="date">
        <text class="x-label">{{item.displayDate}}</text>
      </block>
    </view>
  </view>
</view>

<!-- ç¬¬4æ®µï¼šå…¶ä»–å†…å®¹ -->
<view class="quick-record-section">
  <view class="section-title">ğŸ“ ä»Šæ—¥å¿«é€Ÿè®°å½•</view>
  <view class="quick-actions">
    <view class="action-item" bindtap="quickRecord" data-type="mood">
      <view class="action-icon">ğŸ˜Š</view>
      <text class="action-text">æƒ…ç»ª</text>
    </view>
    <view class="action-item" bindtap="quickRecord" data-type="diet">
      <view class="action-icon">ğŸ½ï¸</view>
      <text class="action-text">é¥®é£Ÿ</text>
    </view>
    <view class="action-item" bindtap="quickRecord" data-type="sleep">
      <view class="action-icon">ğŸ˜´</view>
      <text class="action-text">ç¡çœ </text>
    </view>
    <view class="action-item" bindtap="quickRecord" data-type="exercise">
      <view class="action-icon">ğŸƒ</view>
      <text class="action-text">è¿åŠ¨</text>
    </view>
    <view class="action-item" bindtap="quickRecord" data-type="special">
      <view class="action-icon">ğŸ†˜</view>
      <text class="action-text">ç‰¹æ®Š</text>
    </view>
  </view>
</view>