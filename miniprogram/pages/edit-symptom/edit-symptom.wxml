<!-- symptom.wxml -->
<view class="edit-container">
  <view class="header">
  <view class="header-back-btn" bindtap="goBack">
    <text class="back-icon">‹</text>
    <text class="back-text">返回</text>
  </view>
</view>
<!-- 状况选择 -->
<view class="form-section">
  <text class="section-title">选择状况</text>
  <view class="symptom-options">
    <block wx:for="{{symptomOptions}}" wx:key="value">
      <view
        class="symptom-option {{selectedSymptom === item.value ? 'selected' : ''}}"
        bindtap="selectSymptom"
        data-value="{{item.value}}"
      >
        <text class="option-text">{{item.label}}</text>
      </view>
    </block>
  </view>

  <!-- 其他状况输入框 -->
  <view class="other-input-container" wx:if="{{showOtherInput}}">
    <input
      class="other-input"
      placeholder="请输入状况描述..."
      value="{{otherSymptomText}}"
      bindinput="onOtherSymptomInput"
    />
  </view>
</view>

<!-- 严重程度选择 - 始终显示 -->
<view class="form-section">
  <text class="section-title">严重程度</text>
  <view class="severity-options">
    <block wx:for="{{severityLevels}}" wx:key="level">
      <view
        class="severity-option {{selectedSeverity === item.level ? 'selected' : ''}} {{selectedSymptom === 'asymptomatic' ? 'disabled' : ''}}"
        bindtap="{{selectedSymptom === 'asymptomatic' ? '' : 'selectSeverity'}}"
        data-level="{{item.level}}"
      >
        <text class="severity-icon">{{item.icon}}</text>
        <text class="severity-label">{{item.label}}</text>
      </view>
    </block>
  </view>
</view>

<!-- 添加按钮 - 始终显示 -->
<view class="form-section">
  <view 
    class="btn primary add-btn {{(selectedSymptom === 'asymptomatic' || (selectedSymptom !== 'asymptomatic' && selectedSeverity)) ? '' : 'disabled'}}" 
    bindtap="{{(selectedSymptom === 'asymptomatic' || (selectedSymptom !== 'asymptomatic' && selectedSeverity)) ? 'confirmSymptom' : ''}}"
  >
    <text class="btn-icon">+</text>
    添加此状况
  </view>
</view>

<!-- 已选状况列表 - 固定位置 -->
<view class="form-section selected-list-section">
  <text class="section-title">已选状况</text>
  <view class="selected-list">
    <block wx:for="{{confirmedSymptoms}}" wx:key="id">
      <view class="selected-item">
        <text class="selected-name">{{item.symptomName}}</text>
        <text class="selected-severity {{item.severityLevel === 1 ? 'mild' : item.severityLevel === 2 ? 'moderate' : 'severe'}}">
          {{item.severity}}
        </text>
        <text class="delete-btn" bindtap="deleteSymptom" data-index="{{index}}">×</text>
      </view>
    </block>
    <view class="empty-tip" wx:if="{{confirmedSymptoms.length === 0}}">
      <text>暂无已选状况</text>
    </view>
  </view>
</view>

<!-- 温馨提示 -->
<view class="warm-tip">
  <text>记录状况有助于了解宝宝情况，妈妈们要多对孩子微笑和拥抱 💕</text>
</view>

<!-- 最终确认按钮 -->
<view class="final-confirm-section" wx:if="{{confirmedSymptoms.length > 0}}">
  <view class="final-summary">
    <text class="summary-count">{{confirmedSymptoms.length}}</text>
    <text class="summary-text">个状况已添加</text>
  </view>
  <view class="btn complete final-confirm-btn" bindtap="completeSelection">
    确认提交
  </view>
</view>

</view>