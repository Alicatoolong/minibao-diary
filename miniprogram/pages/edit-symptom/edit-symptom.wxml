<!-- symptom.wxml -->
<view class="edit-container">

<!-- ç—‡çŠ¶é€‰æ‹© -->
<view class="form-section">
  <text class="section-title">é€‰æ‹©ç—‡çŠ¶</text>
  <view class="symptom-options">
    <block wx:for="{{symptomOptions}}" wx:key="value">
      <view
        class="symptom-option {{selectedSymptom === item.value ? 'selected' : ''}}"
        bindtap="selectSymptom"
        data-value="{{item.value}}"
      >
        <text class="option-text">{{item.label}}</text>
      </view>
    </block>
  </view>

  <!-- å…¶ä»–ç—‡çŠ¶è¾“å…¥æ¡† -->
  <view class="other-input-container" wx:if="{{showOtherInput}}">
    <input
      class="other-input"
      placeholder="è¯·è¾“å…¥ç—‡çŠ¶æè¿°..."
      value="{{otherSymptomText}}"
      bindinput="onOtherSymptomInput"
    />
  </view>
</view>

<!-- ä¸¥é‡ç¨‹åº¦é€‰æ‹© - å§‹ç»ˆæ˜¾ç¤º -->
<view class="form-section">
  <text class="section-title">ä¸¥é‡ç¨‹åº¦</text>
  <view class="severity-options">
    <block wx:for="{{severityLevels}}" wx:key="level">
      <view
        class="severity-option {{selectedSeverity === item.level ? 'selected' : ''}} {{selectedSymptom === 'asymptomatic' ? 'disabled' : ''}}"
        bindtap="{{selectedSymptom === 'asymptomatic' ? '' : 'selectSeverity'}}"
        data-level="{{item.level}}"
      >
        <text class="severity-icon">{{item.icon}}</text>
        <text class="severity-label">{{item.label}}</text>
      </view>
    </block>
  </view>
</view>

<!-- æ·»åŠ æŒ‰é’® - å§‹ç»ˆæ˜¾ç¤º -->
<view class="form-section">
  <view 
    class="btn primary add-btn {{(selectedSymptom === 'asymptomatic' || (selectedSymptom !== 'asymptomatic' && selectedSeverity)) ? '' : 'disabled'}}" 
    bindtap="{{(selectedSymptom === 'asymptomatic' || (selectedSymptom !== 'asymptomatic' && selectedSeverity)) ? 'confirmSymptom' : ''}}"
  >
    <text class="btn-icon">+</text>
    æ·»åŠ æ­¤ç—‡çŠ¶
  </view>
</view>

<!-- å·²é€‰ç—‡çŠ¶åˆ—è¡¨ - å›ºå®šä½ç½® -->
<view class="form-section selected-list-section">
  <text class="section-title">å·²é€‰ç—‡çŠ¶</text>
  <view class="selected-list">
    <block wx:for="{{confirmedSymptoms}}" wx:key="id">
      <view class="selected-item">
        <text class="selected-name">{{item.symptomName}}</text>
        <text class="selected-severity {{item.severityLevel === 1 ? 'mild' : item.severityLevel === 2 ? 'moderate' : 'severe'}}">
          {{item.severity}}
        </text>
        <text class="delete-btn" bindtap="deleteSymptom" data-index="{{index}}">Ã—</text>
      </view>
    </block>
    <view class="empty-tip" wx:if="{{confirmedSymptoms.length === 0}}">
      <text>æš‚æ— å·²é€‰ç—‡çŠ¶</text>
    </view>
  </view>
</view>

<!-- æ¸©é¦¨æç¤º -->
<view class="warm-tip">
  <text>è®°å½•ç—‡çŠ¶æœ‰åŠ©äºäº†è§£å®å®æƒ…å†µï¼Œå¦ˆå¦ˆä»¬è¦å¤šå¯¹å­©å­å¾®ç¬‘å’Œæ‹¥æŠ± ğŸ’•</text>
</view>

<!-- æœ€ç»ˆç¡®è®¤æŒ‰é’® -->
<view class="final-confirm-section" wx:if="{{confirmedSymptoms.length > 0}}">
  <view class="final-summary">
    <text class="summary-count">{{confirmedSymptoms.length}}</text>
    <text class="summary-text">ä¸ªç—‡çŠ¶å·²æ·»åŠ </text>
  </view>
  <view class="btn complete final-confirm-btn" bindtap="completeSelection">
    ç¡®è®¤æäº¤
  </view>
</view>

</view>