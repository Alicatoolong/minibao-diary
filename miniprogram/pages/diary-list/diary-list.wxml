<view class="header">
  <view class="header-back-btn" bindtap="goBack">
    <text class="back-icon">â€¹</text>
    <text class="back-text">è¿”å›</text>
  </view>
</view>

<view class="diary-container">
  <!-- å†™æ–°æ—¥è®°æŒ‰é’® -->
  <view class="new-diary-btn" bindtap="createNewDiary">
    <text class="btn-icon">âœï¸</text>
    <text class="btn-text">å†™æ–°æ—¥è®°</text>
  </view>

  <!-- æ—¥è®°åˆ—è¡¨ -->
  <view class="diary-list">
    <view 
      class="diary-item {{item.isPublic ? 'public' : 'private'}}"
      wx:for="{{diaryList}}" 
      wx:key="id"
      bindtap="viewDiaryDetail"
      data-diary="{{item}}"
    >
      <view class="diary-header">
        <view class="diary-date">{{item.createTime}}</view>
        <view class="diary-privacy {{item.isPublic ? 'public' : 'private'}}">
          {{item.isPublic ? 'å…¬å¼€' : 'ç§å¯†'}}
        </view>
      </view>
      
      <view class="diary-content">
        <text class="diary-text">{{item.content}}</text>
        <view class="diary-mood" wx:if="{{item.mood}}">
          <text class="mood-icon">{{item.moodIcon}}</text>
          <text class="mood-text">{{item.mood}}</text>
        </view>
      </view>
      
      <view class="diary-footer">
        <view class="diary-tags" wx:if="{{item.tags && item.tags.length > 0}}">
          <text class="tag" wx:for="{{item.tags}}" wx:key="*this">{{item}}</text>
        </view>
        <view class="diary-actions">
          <!-- ä½¿ç”¨ catchtap é˜»æ­¢äº‹ä»¶å†’æ³¡ -->
          <view class="action-btn delete" catchtap="deleteDiary" data-id="{{item.id}}">
            <text class="action-icon">ğŸ—‘ï¸</text>
            <text>åˆ é™¤</text>
          </view>
          <view class="action-btn privacy" catchtap="togglePrivacy" data-id="{{item.id}}">
            <text class="action-icon">{{item.isPublic ? 'ğŸ”’' : 'ğŸŒ'}}</text>
            <text>{{item.isPublic ? 'ç§å¯†' : 'å…¬å¼€'}}</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{diaryList.length === 0}}">
      <text class="empty-icon">ğŸ“”</text>
      <text class="empty-text">è¿˜æ²¡æœ‰æ—¥è®°å“¦</text>
      <text class="empty-subtext">è®°å½•å®å®æˆé•¿çš„æ¯ä¸€ä¸ªç¬é—´</text>
    </view>
  </view>
</view>