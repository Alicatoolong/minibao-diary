<view class="symptom-history-page">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <view class="header-content">
      <view class="back-btn" bindtap="goBack">
        <text class="back-icon">â†</text>
        <text class="back-text">è¿”å›</text>
      </view>
      <text class="title">æƒ…å†µå†å²è®°å½•</text>
      <view class="placeholder"></view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{isLoading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- æƒ…å†µè®°å½•åˆ—è¡¨ -->
  <view class="history-list" wx:else>
    <block wx:if="{{symptomRecords.length > 0}}">
      <view class="history-item" wx:for="{{symptomRecords}}" wx:key="id">
        <view class="item-header">
          <text class="symptom-desc">{{item.description}}</text>
          <view class="severity-badge level-{{item.severity}}">
            {{item.severityText || 'æœªçŸ¥'}}
          </view>
        </view>
        
        <view class="item-details">
          <view class="detail-row">
            <text class="detail-label">è®°å½•æ—¶é—´ï¼š</text>
            <text class="detail-value">{{item.formattedTime || item.timestamp || item.date || 'æœªçŸ¥æ—¶é—´'}}</text>
          </view>
          <view class="detail-row" wx:if="{{item.symptomCount && item.symptomCount > 1}}">
            <text class="detail-label">ç—‡çŠ¶æ•°é‡ï¼š</text>
            <text class="detail-value">{{item.symptomCount}}ä¸ªç—‡çŠ¶</text>
          </view>
        </view>
        
        <!-- ç§»é™¤ç¼–è¾‘æŒ‰é’®ï¼Œåªä¿ç•™åˆ é™¤æŒ‰é’® -->
        <view class="item-actions">
          <text class="action-btn delete" bindtap="deleteRecord" data-id="{{item.id}}">åˆ é™¤</text>
        </view>
      </view>
    </block>
    
    <block wx:else>
      <view class="empty-state">
        <text class="empty-icon">ğŸ“</text>
        <text class="empty-text">æš‚æ— æƒ…å†µè®°å½•</text>
        <text class="empty-tip">è¿˜æ²¡æœ‰è®°å½•è¿‡å®å®çš„æƒ…å†µå“¦</text>
      </view>
    </block>
  </view>

  <!-- å›ºå®šåœ¨åº•éƒ¨çš„æ·»åŠ è®°å½•æŒ‰é’® -->
  <view class="add-record-btn-container">
    <view class="add-record-btn" bindtap="goToEdit">
      <text class="add-icon">+</text>
      <text class="add-text">æ·»åŠ è®°å½•</text>
    </view>
  </view>
</view>